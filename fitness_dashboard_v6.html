<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Run & Lift Dashboard ‚Äî v6</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/dayjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/plugin/isoWeek.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.10/plugin/advancedFormat.min.js"></script>
  <script>dayjs.extend(dayjs_plugin_isoWeek); dayjs.extend(dayjs_plugin_advancedFormat);</script>
  <style>
    :root{
      --bg:#0b0b0f;
      --card:#13131a;
      --muted:#8a8ea1;
      --text:#eef0f4;
      --accent-orange:#ff6a00;
      --accent-blue:#4aa3ff;
      --chip:#1c1c25;
      --chip-border:#242636;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
      background:linear-gradient(180deg,#090a0f 0%, #0b0b0f 100%);
      color:var(--text);
    }
    header{
      padding:20px 24px;
      display:flex;
      align-items:center;
      gap:16px;
      border-bottom:1px solid #1b1d28;
      position:sticky;top:0;background:rgba(11,11,15,.85);backdrop-filter: blur(8px);
      z-index:10;
    }
    .brand{font-weight:800; font-size:18px; letter-spacing:.4px}
    .status{
      display:inline-flex;gap:8px;align-items:center;margin-left:6px;
      background:var(--chip); border:1px solid var(--chip-border);
      padding:6px 10px;border-radius:999px;color:var(--muted);font-size:12px
    }
    .filebox{
      margin-left:auto;
      display:flex;align-items:center;gap:10px;
      background:var(--chip);
      border:1px solid var(--chip-border);
      padding:8px 12px;border-radius:12px;
    }
    input[type=file]{color:var(--muted)}
    .toolbar{
      display:flex;gap:8px;align-items:center;
      background:var(--chip);
      border:1px solid var(--chip-border);
      padding:6px;border-radius:12px;
    }
    .btn{
      padding:8px 12px;border-radius:10px;border:1px solid #2a2d3f; background:#151724;
      color:var(--text); cursor:pointer; font-weight:600; letter-spacing:.2px
    }
    .btn[data-active="true"]{background:#21243a;border-color:#3a3e58}
    .container{padding:20px 24px; max-width:1500px; margin:0 auto}
    .split{display:grid; grid-template-columns:1fr 1fr; gap:18px}
    .card{
      background:var(--card); border:1px solid #1b1d28; border-radius:18px; padding:16px;
      box-shadow:0 1px 0 #161822, 0 8px 24px rgba(0,0,0,.25);
      position:relative;
    }
    .section-title{display:flex;align-items:center;gap:10px;margin-bottom:8px}
    .dot{width:8px;height:8px;border-radius:50%}
    .orange{background:var(--accent-orange)}
    .blue{background:var(--accent-blue)}
    .kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:8px}
    .kpi{
      background:#0f1017;border:1px solid #1f2130;border-radius:14px;padding:14px;
      display:flex;flex-direction:column;gap:2px
    }
    .kpi small{color:var(--muted);text-transform:uppercase;letter-spacing:.6px}
    .kpi strong{font-size:22px}
    .row{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:12px}
    canvas{width:100%!important;height:320px!important}
    .legend{display:flex;gap:10px;flex-wrap:wrap}
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      background:#101221;border:1px solid #1d2030;
      padding:6px 10px;border-radius:999px;color:var(--muted);font-size:12px
    }
    .top-right{ position:absolute; right:12px; top:12px; display:flex; gap:6px }
    select{
      background:#0f111b;color:var(--text);border:1px solid #272a3c;padding:6px 8px;border-radius:10px
    }
  </style>
</head>
<body>
<header>
  <div class="brand">üèÉ‚Äç‚ôÇÔ∏è Run (orange) &nbsp;/&nbsp; üèãÔ∏è‚Äç‚ôÇÔ∏è Lift (blue)</div>
  <span class="status" id="liveStatus">Loading Google Sheets‚Ä¶</span>
  <div class="filebox">
    <label class="pill">CSV</label>
    <input type="file" id="csvInput" accept=".csv" title="Optional: drop a CSV to override Google Sheets" />
  </div>
</header>

<div class="container">
  <div id="preview" style="font-family:monospace; white-space:pre-wrap; font-size:13px; line-height:1.5;"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
const SHEET_CSV = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTUvxg_cAUFIJwRhsV754db7rNJM_k9pIh_5v0MYus7MHQfDEZTA1uLUfdavyYe2fmEDVEODWkM_wcw/pub?output=csv";
const ALL_ORIGINS = "https://api.allorigins.win/raw?url=" + encodeURIComponent(SHEET_CSV);
const preview = document.getElementById("preview");

function log(msg){ preview.textContent += msg + "\\n"; }

log("Fetching CSV from Google Sheets via allorigins‚Ä¶");

fetch(ALL_ORIGINS)
  .then(r => {
    if(!r.ok) throw new Error("HTTP " + r.status);
    return r.text();
  })
  .then(text => {
    log("‚úÖ CSV downloaded (" + text.length + " chars).");
    document.getElementById("liveStatus").textContent = "Live source: Google Sheets ‚úì";
    Papa.parse(text, {
      header: true,
      complete: (res) => {
        log("‚úÖ Parsed " + res.data.length + " rows.");
        preview.textContent += "\\nSample:\\n" + JSON.stringify(res.data.slice(0,5), null, 2);
      }
    });
  })
  .catch(err => {
    log("‚ùå Couldn‚Äôt load Google Sheets CSV: " + err);
    document.getElementById("liveStatus").textContent = "Live source failed ‚Äî drop CSV above";
  });
</script>
</body>
</html>